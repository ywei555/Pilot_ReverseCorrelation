<!DOCTYPE html>
<html>
<head>
    <title> Yi's Experiment</title>
    <script src="./jspsych/dist/jspsych.js"></script>
    <script src="./jspsych/dist/plugin-html-button-response.js"></script>
    <script src="./jspsych/dist/plugin-preload.js"></script>
    <script src="./jp/jspsych-psychophysics.js"></script>
    <script src = "yw.php"></script>
   
    <link rel="stylesheet" href="./jspsych/dist/jspsych.css"></link>
</head>
<body></body>
<script>
    // This file demonstrates how to present two images with 500-ms SOA

    function saveData(data){
        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'yw.php'); // 'write_data.php' is the path to the php file described above.
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({filedata: data}));
        }
    const jsPsych = initJsPsych({
        on_finish: function() {
            saveData(jsPsych.data.get().csv());
            jsPsych.data.displayData();
        }
    })

    console.log(`jsPsych Version ${jsPsych.version()}`)

    const instruction = {
        type: jsPsychHtmlButtonResponse,
        stimulus: 'Click on the Start button.',
        choices: ['Start'],
        prompt: "This is a sample program for the jspsych-psychophysics plugin.",
    }

    const images = [ // All the images used in this demo
        'code/stimuli/rcic_base_1_00201_inv.png',
        'code/stimuli/rcic_base_1_00201_ori.png',
        'code/stimuli/rcic_base_1_00202_inv.png',
        'code/stimuli/rcic_base_1_00202_ori.png',
        'code/stimuli/rcic_base_1_00203_inv.png',
        'code/stimuli/rcic_base_1_00203_ori.png',
        'code/stimuli/rcic_base_1_00204_inv.png',
        'code/stimuli/rcic_base_1_00204_ori.png',
        'code/stimuli/rcic_base_1_00205_inv.png',
        'code/stimuli/rcic_base_1_00205_ori.png',
        'code/stimuli/rcic_base_1_00206_inv.png',
        'code/stimuli/rcic_base_1_00206_ori.png',
        'code/stimuli/rcic_base_1_00207_inv.png',
        'code/stimuli/rcic_base_1_00207_ori.png',
        'code/stimuli/rcic_base_1_00208_inv.png',
        'code/stimuli/rcic_base_1_00208_ori.png',
        'code/stimuli/rcic_base_1_00209_inv.png',
        'code/stimuli/rcic_base_1_00209_ori.png',
        'code/stimuli/rcic_base_1_00210_inv.png',
        'code/stimuli/rcic_base_1_00210_ori.png',
        'code/stimuli/rcic_base_1_00211_inv.png',
        'code/stimuli/rcic_base_1_00211_ori.png',
        'code/stimuli/rcic_base_1_00212_inv.png',
        'code/stimuli/rcic_base_1_00212_ori.png',
        'code/stimuli/rcic_base_1_00213_inv.png',
        'code/stimuli/rcic_base_1_00213_ori.png',
        'code/stimuli/rcic_base_1_00214_inv.png',
        'code/stimuli/rcic_base_1_00214_ori.png',
        'code/stimuli/rcic_base_1_00215_inv.png',
        'code/stimuli/rcic_base_1_00215_ori.png',
        'code/stimuli/rcic_base_1_00216_inv.png',
        'code/stimuli/rcic_base_1_00216_ori.png',
        'code/stimuli/rcic_base_1_00217_inv.png',
        'code/stimuli/rcic_base_1_00217_ori.png',
        'code/stimuli/rcic_base_1_00218_inv.png',
        'code/stimuli/rcic_base_1_00218_ori.png',
        'code/stimuli/rcic_base_1_00219_inv.png',
        'code/stimuli/rcic_base_1_00219_ori.png',
        'code/stimuli/rcic_base_1_00220_inv.png',
        'code/stimuli/rcic_base_1_00220_ori.png',
        'code/stimuli/rcic_base_1_00221_inv.png',
        'code/stimuli/rcic_base_1_00221_ori.png',
        'code/stimuli/rcic_base_1_00222_inv.png',
        'code/stimuli/rcic_base_1_00222_ori.png',
        'code/stimuli/rcic_base_1_00223_inv.png',
        'code/stimuli/rcic_base_1_00223_ori.png',
        'code/stimuli/rcic_base_1_00224_inv.png',
        'code/stimuli/rcic_base_1_00224_ori.png',
        'code/stimuli/rcic_base_1_00225_inv.png',
        'code/stimuli/rcic_base_1_00225_ori.png',
        'code/stimuli/rcic_base_1_00226_inv.png',
        'code/stimuli/rcic_base_1_00226_ori.png',
        'code/stimuli/rcic_base_1_00227_inv.png',
        'code/stimuli/rcic_base_1_00227_ori.png',
        'code/stimuli/rcic_base_1_00228_inv.png',
        'code/stimuli/rcic_base_1_00228_ori.png',
        'code/stimuli/rcic_base_1_00229_inv.png',
        'code/stimuli/rcic_base_1_00229_ori.png',
        'code/stimuli/rcic_base_1_00230_inv.png',
        'code/stimuli/rcic_base_1_00230_ori.png',
        'code/stimuli/rcic_base_1_00231_inv.png',
        'code/stimuli/rcic_base_1_00231_ori.png',
        'code/stimuli/rcic_base_1_00232_inv.png',
        'code/stimuli/rcic_base_1_00232_ori.png',
        'code/stimuli/rcic_base_1_00233_inv.png',
        'code/stimuli/rcic_base_1_00233_ori.png',
        'code/stimuli/rcic_base_1_00234_inv.png',
        'code/stimuli/rcic_base_1_00234_ori.png',
        'code/stimuli/rcic_base_1_00235_inv.png',
        'code/stimuli/rcic_base_1_00235_ori.png',
        'code/stimuli/rcic_base_1_00236_inv.png',
        'code/stimuli/rcic_base_1_00236_ori.png',
        'code/stimuli/rcic_base_1_00237_inv.png',
        'code/stimuli/rcic_base_1_00237_ori.png',
        'code/stimuli/rcic_base_1_00238_inv.png',
        'code/stimuli/rcic_base_1_00238_ori.png',
        'code/stimuli/rcic_base_1_00239_inv.png',
        'code/stimuli/rcic_base_1_00239_ori.png',
        'code/stimuli/rcic_base_1_00240_inv.png',
        'code/stimuli/rcic_base_1_00240_ori.png',
        'code/stimuli/rcic_base_1_00241_inv.png',
        'code/stimuli/rcic_base_1_00241_ori.png',
        'code/stimuli/rcic_base_1_00242_inv.png',
        'code/stimuli/rcic_base_1_00242_ori.png',
        'code/stimuli/rcic_base_1_00243_inv.png',
        'code/stimuli/rcic_base_1_00243_ori.png',
        'code/stimuli/rcic_base_1_00244_inv.png',
        'code/stimuli/rcic_base_1_00244_ori.png',
        'code/stimuli/rcic_base_1_00245_inv.png',
        'code/stimuli/rcic_base_1_00245_ori.png',
        'code/stimuli/rcic_base_1_00246_inv.png',
        'code/stimuli/rcic_base_1_00246_ori.png',
        'code/stimuli/rcic_base_1_00247_inv.png',
        'code/stimuli/rcic_base_1_00247_ori.png',
        'code/stimuli/rcic_base_1_00248_inv.png',
        'code/stimuli/rcic_base_1_00248_ori.png',
        'code/stimuli/rcic_base_1_00249_inv.png',
        'code/stimuli/rcic_base_1_00249_ori.png',
        'code/stimuli/rcic_base_1_00250_inv.png',
        'code/stimuli/rcic_base_1_00250_ori.png',
        'code/stimuli/rcic_base_1_00251_inv.png',
        'code/stimuli/rcic_base_1_00251_ori.png',
        'code/stimuli/rcic_base_1_00252_inv.png',
        'code/stimuli/rcic_base_1_00252_ori.png',
        'code/stimuli/rcic_base_1_00253_inv.png',
        'code/stimuli/rcic_base_1_00253_ori.png',
        'code/stimuli/rcic_base_1_00254_inv.png',
        'code/stimuli/rcic_base_1_00254_ori.png',
        'code/stimuli/rcic_base_1_00255_inv.png',
        'code/stimuli/rcic_base_1_00255_ori.png',
        'code/stimuli/rcic_base_1_00256_inv.png',
        'code/stimuli/rcic_base_1_00256_ori.png',
        'code/stimuli/rcic_base_1_00257_inv.png',
        'code/stimuli/rcic_base_1_00257_ori.png',
        'code/stimuli/rcic_base_1_00258_inv.png',
        'code/stimuli/rcic_base_1_00258_ori.png',
        'code/stimuli/rcic_base_1_00259_inv.png',
        'code/stimuli/rcic_base_1_00259_ori.png',
        'code/stimuli/rcic_base_1_00260_inv.png',
        'code/stimuli/rcic_base_1_00260_ori.png',
        'code/stimuli/rcic_base_1_00261_inv.png',
        'code/stimuli/rcic_base_1_00261_ori.png',
        'code/stimuli/rcic_base_1_00262_inv.png',
        'code/stimuli/rcic_base_1_00262_ori.png',
        'code/stimuli/rcic_base_1_00263_inv.png',
        'code/stimuli/rcic_base_1_00263_ori.png',
        'code/stimuli/rcic_base_1_00264_inv.png',
        'code/stimuli/rcic_base_1_00264_ori.png',
        'code/stimuli/rcic_base_1_00265_inv.png',
        'code/stimuli/rcic_base_1_00265_ori.png',
        'code/stimuli/rcic_base_1_00266_inv.png',
        'code/stimuli/rcic_base_1_00266_ori.png',
        'code/stimuli/rcic_base_1_00267_inv.png',
        'code/stimuli/rcic_base_1_00267_ori.png',
        'code/stimuli/rcic_base_1_00268_inv.png',
        'code/stimuli/rcic_base_1_00268_ori.png',
        'code/stimuli/rcic_base_1_00269_inv.png',
        'code/stimuli/rcic_base_1_00269_ori.png',
        'code/stimuli/rcic_base_1_00270_inv.png',
        'code/stimuli/rcic_base_1_00270_ori.png',
        'code/stimuli/rcic_base_1_00271_inv.png',
        'code/stimuli/rcic_base_1_00271_ori.png',
        'code/stimuli/rcic_base_1_00272_inv.png',
        'code/stimuli/rcic_base_1_00272_ori.png',
        'code/stimuli/rcic_base_1_00273_inv.png',
        'code/stimuli/rcic_base_1_00273_ori.png',
        'code/stimuli/rcic_base_1_00274_inv.png',
        'code/stimuli/rcic_base_1_00274_ori.png',
        'code/stimuli/rcic_base_1_00275_inv.png',
        'code/stimuli/rcic_base_1_00275_ori.png',
        'code/stimuli/rcic_base_1_00276_inv.png',
        'code/stimuli/rcic_base_1_00276_ori.png',
        'code/stimuli/rcic_base_1_00277_inv.png',
        'code/stimuli/rcic_base_1_00277_ori.png',
        'code/stimuli/rcic_base_1_00278_inv.png',
        'code/stimuli/rcic_base_1_00278_ori.png',
        'code/stimuli/rcic_base_1_00279_inv.png',
        'code/stimuli/rcic_base_1_00279_ori.png',
        'code/stimuli/rcic_base_1_00280_inv.png',
        'code/stimuli/rcic_base_1_00280_ori.png',
        'code/stimuli/rcic_base_1_00281_inv.png',
        'code/stimuli/rcic_base_1_00281_ori.png',
        'code/stimuli/rcic_base_1_00282_inv.png',
        'code/stimuli/rcic_base_1_00282_ori.png',
        'code/stimuli/rcic_base_1_00283_inv.png',
        'code/stimuli/rcic_base_1_00283_ori.png',
        'code/stimuli/rcic_base_1_00284_inv.png',
        'code/stimuli/rcic_base_1_00284_ori.png',
        'code/stimuli/rcic_base_1_00285_inv.png',
        'code/stimuli/rcic_base_1_00285_ori.png',
        'code/stimuli/rcic_base_1_00286_inv.png',
        'code/stimuli/rcic_base_1_00286_ori.png',
        'code/stimuli/rcic_base_1_00287_inv.png',
        'code/stimuli/rcic_base_1_00287_ori.png',
        'code/stimuli/rcic_base_1_00288_inv.png',
        'code/stimuli/rcic_base_1_00288_ori.png',
        'code/stimuli/rcic_base_1_00289_inv.png',
        'code/stimuli/rcic_base_1_00289_ori.png',
        'code/stimuli/rcic_base_1_00290_inv.png',
        'code/stimuli/rcic_base_1_00290_ori.png',
        'code/stimuli/rcic_base_1_00291_inv.png',
        'code/stimuli/rcic_base_1_00291_ori.png',
        'code/stimuli/rcic_base_1_00292_inv.png',
        'code/stimuli/rcic_base_1_00292_ori.png',
        'code/stimuli/rcic_base_1_00293_inv.png',
        'code/stimuli/rcic_base_1_00293_ori.png',
        'code/stimuli/rcic_base_1_00294_inv.png',
        'code/stimuli/rcic_base_1_00294_ori.png',
        'code/stimuli/rcic_base_1_00295_inv.png',
        'code/stimuli/rcic_base_1_00295_ori.png',
        'code/stimuli/rcic_base_1_00296_inv.png',
        'code/stimuli/rcic_base_1_00296_ori.png',
        'code/stimuli/rcic_base_1_00297_inv.png',
        'code/stimuli/rcic_base_1_00297_ori.png',
        'code/stimuli/rcic_base_1_00298_inv.png',
        'code/stimuli/rcic_base_1_00298_ori.png',
        'code/stimuli/rcic_base_1_00299_inv.png',
        'code/stimuli/rcic_base_1_00299_ori.png',
        'code/stimuli/rcic_base_1_00300_inv.png',
        'code/stimuli/rcic_base_1_00300_ori.png'

    ];

    // Preloading files are needed to present the stimuli accurately.
    const preload = {
        type: jsPsychPreload,
        images: images,
    }

    const trial = {
        timeline: [
            {
                type: jsPsychPsychophysics,
                stimuli: [
                    {
                        obj_type: 'image',
                        file: jsPsych.timelineVariable('firstImage'),
                        show_start_time: 500, // ms after the start of the trial
                        startX: 300,
                    },
                    {
                        obj_type: 'image',
                        file: jsPsych.timelineVariable('secondImage'),
                        show_start_time: 500, // ms after the start of the trial
                        startX: 1000
                    }
                ],
                choices: ['f','j'],
                canvas_height: 500,
                prompt: 'Press F to choice left image, press J to choice right image',
                data: {'firstImage': jsPsych.timelineVariable('firstImage'),
                'secondImage': jsPsych.timelineVariable('secondImage')} // for identification
            }
        ],
        timeline_variables: [     
            {firstImage: images[0], secondImage: images[1]},
            {firstImage: images[2], secondImage: images[3]},
            {firstImage: images[4], secondImage: images[5]},
            {firstImage: images[6], secondImage: images[7]},
            {firstImage: images[8], secondImage: images[9]},
            {firstImage: images[10], secondImage: images[11]},
            {firstImage: images[12], secondImage: images[13]},
            {firstImage: images[14], secondImage: images[15]},
            {firstImage: images[16], secondImage: images[17]},
            {firstImage: images[18], secondImage: images[19]},
            {firstImage: images[20], secondImage: images[21]},
            {firstImage: images[22], secondImage: images[23]},
            {firstImage: images[24], secondImage: images[25]},
            {firstImage: images[26], secondImage: images[27]},
            {firstImage: images[28], secondImage: images[29]},
            {firstImage: images[30], secondImage: images[31]},
            {firstImage: images[32], secondImage: images[33]},
            {firstImage: images[34], secondImage: images[35]},
            {firstImage: images[36], secondImage: images[37]},
            {firstImage: images[38], secondImage: images[39]},
            {firstImage: images[40], secondImage: images[41]},
            {firstImage: images[42], secondImage: images[43]},
            {firstImage: images[44], secondImage: images[45]},
            {firstImage: images[46], secondImage: images[47]},
            {firstImage: images[48], secondImage: images[49]},
            {firstImage: images[50], secondImage: images[51]},
            {firstImage: images[52], secondImage: images[53]},
            {firstImage: images[54], secondImage: images[55]},
            {firstImage: images[56], secondImage: images[57]},
            {firstImage: images[58], secondImage: images[59]},
            {firstImage: images[60], secondImage: images[61]},
            {firstImage: images[62], secondImage: images[63]},
            {firstImage: images[64], secondImage: images[65]},
            {firstImage: images[66], secondImage: images[67]},
            {firstImage: images[68], secondImage: images[69]},
            {firstImage: images[70], secondImage: images[71]},
            {firstImage: images[72], secondImage: images[73]},
            {firstImage: images[74], secondImage: images[75]},
            {firstImage: images[76], secondImage: images[77]},
            {firstImage: images[78], secondImage: images[79]},
            {firstImage: images[80], secondImage: images[81]},
            {firstImage: images[82], secondImage: images[83]},
            {firstImage: images[84], secondImage: images[85]},
            {firstImage: images[86], secondImage: images[87]},
            {firstImage: images[88], secondImage: images[89]},
            {firstImage: images[90], secondImage: images[91]},
            {firstImage: images[92], secondImage: images[93]},
            {firstImage: images[94], secondImage: images[95]},
            {firstImage: images[96], secondImage: images[97]},
            {firstImage: images[98], secondImage: images[99]},
            {firstImage: images[100], secondImage: images[101]},
            {firstImage: images[102], secondImage: images[103]},
            {firstImage: images[104], secondImage: images[105]},
            {firstImage: images[106], secondImage: images[107]},
            {firstImage: images[108], secondImage: images[109]},
            {firstImage: images[110], secondImage: images[111]},
            {firstImage: images[112], secondImage: images[113]},
            {firstImage: images[114], secondImage: images[115]},
            {firstImage: images[116], secondImage: images[117]},
            {firstImage: images[118], secondImage: images[119]},
            {firstImage: images[120], secondImage: images[121]},
            {firstImage: images[122], secondImage: images[123]},
            {firstImage: images[124], secondImage: images[125]},
            {firstImage: images[126], secondImage: images[127]},
            {firstImage: images[128], secondImage: images[129]},
            {firstImage: images[130], secondImage: images[131]},
            {firstImage: images[132], secondImage: images[133]},
            {firstImage: images[134], secondImage: images[135]},
            {firstImage: images[136], secondImage: images[137]},
            {firstImage: images[138], secondImage: images[139]},
            {firstImage: images[140], secondImage: images[141]},
            {firstImage: images[142], secondImage: images[143]},
            {firstImage: images[144], secondImage: images[145]},
            {firstImage: images[146], secondImage: images[147]},
            {firstImage: images[148], secondImage: images[149]},
            {firstImage: images[150], secondImage: images[151]},
            {firstImage: images[152], secondImage: images[153]},
            {firstImage: images[154], secondImage: images[155]},
            {firstImage: images[156], secondImage: images[157]},
            {firstImage: images[158], secondImage: images[159]},
            {firstImage: images[160], secondImage: images[161]},
            {firstImage: images[162], secondImage: images[163]},
            {firstImage: images[164], secondImage: images[165]},
            {firstImage: images[166], secondImage: images[167]},
            {firstImage: images[168], secondImage: images[169]},
            {firstImage: images[170], secondImage: images[171]},
            {firstImage: images[172], secondImage: images[173]},
            {firstImage: images[174], secondImage: images[175]},
            {firstImage: images[176], secondImage: images[177]},
            {firstImage: images[178], secondImage: images[179]},
            {firstImage: images[180], secondImage: images[181]},
            {firstImage: images[182], secondImage: images[183]},
            {firstImage: images[184], secondImage: images[185]},
            {firstImage: images[186], secondImage: images[187]},
            {firstImage: images[188], secondImage: images[189]},
            {firstImage: images[190], secondImage: images[191]},
            {firstImage: images[192], secondImage: images[193]},
            {firstImage: images[194], secondImage: images[195]},
            {firstImage: images[196], secondImage: images[197]},
            {firstImage: images[198], secondImage: images[199]},
           
        ],
        randomize_order: true
    }

    var data = jsPsych.data.get().filter({trial_type: 'jsPsychPsychophysics', choices: 'f'});

    jsPsych.run([preload, instruction, trial])

</script>

</html>
